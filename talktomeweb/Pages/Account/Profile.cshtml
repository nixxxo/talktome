@page "{userId:int}"
@model talktomeweb.Pages.Account.ProfileModel;
@{
}


<div class="max-w-4xl mx-auto px-4 py-8">
    <div class="flex flex-col gap-8 p-6">
        @if (Model.SelectedUser != null)
        {
            var imagePath = "/images/users/" + Model.SelectedUser.ImagePath ??
            "/images/default-profile.png";

            var myProfileLink = Url.Page("/Account/Profile", new { userId = Model.SelectedUser.UserId });

            <div class="flex items-start gap-6 bg-white shadow rounded-lg p-6">
                <div class="rounded-lg min-w-fit">
                    <img src="@imagePath" alt="Profile Image" class="w-16 h-16 lg:w-24 lg:h-24 rounded-full object-cover">
                </div>
                <div class="flex flex-col gap-4 w-full">
                    <div>
                        <h2 class="text-lg lg:text-2xl font-bold">@Model.SelectedUser.Username</h2>
                        @if (Model.SelectedUser.Bio != null)
                        {
                            <span class="text-xs lg:text-sm">@Model.SelectedUser.Bio</span>
                        }
                        <div class="flex flex-col">
                            <span class="text-xs lg:text-sm">Email: @Model.SelectedUser.Email</span>
                            <span class="text-xs lg:text-sm">Registration Date: @Model.SelectedUser.RegistrationDate</span>
                            <span class="text-xs lg:text-sm">Posts: @Model.SelectedUser.Posts.Count</span>
                        </div>
                    </div>
                </div>
            </div>
        }

        @* Posts *@
        <div>
            @foreach (var post in Model.Posts)
            {
                var imagePath = "/images/users/" + post.User.ImagePath ??
                "/images/default-profile.png";
                var postPath = "/images/posts/" + post.ImagePath;
                var profileLink = Url.Page("/Account/Profile", new { userId = post.User.UserId });
                <div class="border-b pb-6 mt-4">
                    <div class="flex flex-row gap-2 items-center">
                        <a href="@profileLink">
                            <img class="object-cover w-10 h-10 rounded-full" src="@imagePath" alt="Profile Image">
                        </a>
                        <div>
                            <a href="@profileLink" class="font-semibold">@post.User.Username</a>
                            @if (!string.IsNullOrWhiteSpace(post.Text))
                            {
                                <p class="text-sm">@post.Text</p>
                            }
                        </div>
                    </div>
                    @if (!string.IsNullOrWhiteSpace(post.ImagePath))
                    {
                        <div class="bg-pink-50 w-full rounded-lg p-4 mt-4">
                            <img class="m-auto rounded-lg max-h-64" src="@postPath">
                        </div>
                    }

                    <div class="flex flex-row gap-4 mt-2">
                        <div class="flex flex-row gap-1 items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5}
                                stroke="currentColor" class="w-6 h-6 text-pink-500">
                                <path strokeLinecap="round" strokeLinejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312
            2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                            </svg>
                            <span class="text-sm">37723</span>
                        </div>
                        <div class="flex flex-row gap-1 items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6 text-pink-500">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74
            1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22
            1.668.337 2.555.337Z" />
                            </svg>

                            <span class="text-sm">7423</span>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>